<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>Copas - Lua Coroutine Oriented Portable Asynchronous Services</title>
<style type="text/css">
ul { list-style-type: disc };
</style>
</head>
<body bgcolor="#FFFFFF">
<center>
<table border="0" cellspacing="2" cellpadding="2">
<tr>
<td align="center"><a href="http://www.keplerproject.org"><img
border="0" alt="VEnv" src="copas.png"></a> </td>
</tr>

<tr>
<td align="center"><big><b>Copas</b></big> </td>
</tr>

<tr>
<td align="center" valign="top">Lua Coroutine Oriented Portable
Asynchronous Services</td>
</tr>
</table>
</center>

<center><small>
<a href="#over">overview</a> &middot;
<a href="#download">download</a> &middot;
<a href="#new">news</a> &middot;
<a href="#reference">reference</a> &middot;
<a href="#examples">examples</a>
</small></center>

<hr>
<h2>Contents</h2>

<ul>
<li><a href="#over">Overview</a></li>
<li><a href="#version">Current Version</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#new">What's new</a></li>
<li><a href="#reference">Reference</a></li>
<ul>
<li><a href="#ref_copas">Copas</a></li>
<li><a href="#ref_coxpcall">coxpcall</a></li>
</ul>
<li><a href="#examples">Examples</a></li>
<li><a href="#credits">Credits</a></li>
<li><a href="#contact">Contact us</a></li>
</ul>

<a name="over"></a> 
<h2>Overview</h2>

<p>Copas (Coroutine Oriented Portable Asynchronous Services) offers a
dispatcher and socket operations based on coroutines. It also offers a
coroutine based version of pcall and xpcall that allows yielding from within.
</p>

<p>Copas is free software and uses the same
<a href="license.html">license</a> as Lua 5.0.
</p>

<a name="version"></a>
<h2>Current version</h2>

<p>Current version is 1.0 Beta. It was developed for Lua 5.0.</p>

<a name="download"></a> 
<h2>Download</h2>

<p>
Copas can be downloaded from its
<a href="http://luaforge.net/frs/?group_id=100">LuaForge</a> page.
</p>

<a name="new"></a>
<h2>What's new</h2>

<ul>
<li>[17/Feb/2005] Version 1.0 beta released</li>
</ul>

<p>
Copas 1.0 beta follows the
<a href="http://www.keplerproject.org/compat">package proposal</a>
for Lua 5.1, therefore this package should be "installed".
In other words,
if you are using Lua 5.0, the file <tt>compat-5.1.lua</tt> must be
installed in the <tt>LUA_PATH</tt>. If you are using Lua 5.1,
nothing should be done.
</p>

<a name="reference"></a>
<h2>Reference</h2>

<a name="ref_copas"></a>
<h2>Copas</h2>
<p>Copas functions are separated in two groups. The first is relative to the
dispatcher:</p>
<ul>
<li>
<b><code>copas.addserver(server, handler, timeout)</code></b>
<br>
Adds a new server and its handler to the dispatcher using an optional timeout.
</li>
<li>
<b><code>copas.loop()</code></b>
<br>
Listen to client requests and handles them.
</li>
</ul>

<p>The second group is used by the handlers to exchange data with clients:</p>
<ul>
<li>
<b><code>copas.flush(client)</code></b>
<br>
Flushes a client write buffer.
</li>
<li>
<b><code>copas.receive(client, pattern)</code></b>
<br>
Reads a pattern from a client and yields to the reading set on timeouts.
</li>
<li>
<b><code>copas.send(client, data)</code></b>
<br>
Sends data to a client. The operation is buffered and yields to the writing
set on timeouts.
</li>
</ul>

<a name="ref_coxpcall"></a>
<h2>coxpcall</h2>

<p>coxpcall encapsulates Lua protected calls with a coroutine based loop,
so errors can be dealed without the usual pcall/xpcall issues with coroutines
yielding.</p>

<ul>
<li>
<b><code>coxpcall(f, err)</code></b>
<br>
Offers the same functionality as Lua xpcall(f, err).
</li>
<li>
<b><code>copcall(f, ...)</code></b>
<br>
Offers the same functionality as Lua copcall(f, ...).
</li>
</ul>

<a name="examples"></a> 
<h2>Examples</h2>

<p>To do</p>

<a name="credits"></a> 
<h2>Credits</h2>

<p>Copas was designed and implemented by Andr&eacute; Carregal and
Javier Guerra as part of the
<a href="http://www.keplerproject.org">Kepler Project</a> which
holds its copyright.</p>
<p>Copas development had significative contributions from Diego Nehab,
Mike Pall and David Burgess</p>

<a name="contact"></a> 
<h2>Contact us</h2>

<p>For more information please <a href=
"mailto:info-NO-SPAM-THANKS@keplerproject.org">contact us</a>.
Comments are welcome!</p>

<hr>
<small>$Id: index.html,v 1.1 2005/02/17 21:35:03 carregal Exp $</small>
</body>
</html>

